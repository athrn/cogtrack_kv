# -*- coding: utf-8 -*-

#:kivy 1.9

# TODO:
# Set default font for all labels.

# HACK: Must import screenmanager to use transitions in kv file.
#:import SM kivy.uix.screenmanager
#:include cogtrack/gui/base.kv

<ControlButton@IconButton>:

# Fixed height control bar
<ControlBar@BoxLayout+Background>:
  size_hint: (1.0, None)
  pos_hint: {'top':1.0}
  height: theme.default.control_bar_height
  

<SelectGameButton@BaseButton>:
  game_id: 'No GameID'
  text: self.game_id
  size_hint: (1, None)
  pos_hint: {'top':1.0} # , 'center_x': 0.5}
  on_press:
    app.start_game(self.game_id)

      
<MainScreen@Screen>:
  on_enter: app.title = root.name
  
<SelectScreen@MainScreen>:
  name: 'SelectScreen'
  BoxLayout:
    orientation: 'vertical'
    ControlBar:
      Space:
      ControlButton:
        id: config_button
        icon: 'config'
    BoxLayout:
      # size_hint: (1, 1)
      id: select_game_buttons
      orientation: 'vertical'
      # pos_hint: {'top':1.0} # , 'center_x': 0.5}
        
<PlayScreen@MainScreen>:
  name: 'PlayScreen'
  BoxLayout:
    orientation: 'vertical'
    ControlBar:
      ControlButton:
        id: back_button
        icon: 'go-previous'
        on_press: root.manager.current = 'SelectScreen'
      Space:
      ControlButton:
        id: stop_game_button
        icon: 'go-next'
        on_press: root.manager.current = 'ScoreScreen'
    RelativeLayout:
      id: game_area

<ScoreScreen@MainScreen>:
  name: 'ScoreScreen'
  BoxLayout:
    orientation: 'vertical'
    ControlBar:
      ControlButton:
        id: score_delete_button
        icon: 'score-delete'
        background_color: (1, 0, 0, 0.5)
        on_press: root.manager.current = 'SelectScreen'
      Space:
      ControlButton:
        id: score_save_button
        icon: 'score-save'
        background_color: (0, 1, 0, 0.5) 
        on_press: root.manager.current = 'SelectScreen'
    RelativeLayout:
      id: score_area
      Button:
        text: 'Score'

  
ScreenManager:
  id: sm
  transition: SM.FadeTransition()
  
  SelectScreen:
    id: select_screen
  PlayScreen:
    id: play_screen
  ScoreScreen:
    id: score_screen
    

